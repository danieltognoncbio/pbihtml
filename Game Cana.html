<style>
    /* Estilo de Fundo - Tons de Verde/Marrom (Agr√≠cola) */
    body {
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 0;
        /* Fundo verde/marrom claro */
        background-color: #e0f2d9; 
    }
    .game-container {
        display: grid;
        grid-template-columns: repeat(3, 100px);
        grid-template-rows: repeat(3, 100px);
        gap: 5px;
        margin-top: 20px;
        /* Borda de madeira (Marrom) */
        border: 10px solid #8b4513; 
        box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.2);
    }
    .cell {
        background-color: #fff;
        border: 2px solid #556b2f; /* Verde oliva escuro */
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 60px;
        font-weight: bold;
        cursor: pointer;
        user-select: none;
        transition: background-color 0.1s;
    }
    .cell:hover {
        background-color: #f0fff0; /* Quase branco no hover */
    }
    .status {
        margin-bottom: 10px;
        font-size: 20px;
        font-weight: bold;
        color: #38761d; /* Verde escuro para o texto */
    }
    .reset-button {
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        margin-top: 15px;
        background-color: #6aa84f; /* Verde esmeralda */
        color: white;
        border: none;
        border-radius: 5px;
        box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.3);
        transition: background-color 0.2s;
    }
    .reset-button:hover {
        background-color: #38761d; /* Verde mais escuro no hover */
    }
</style>

<div class="status" id="status">Vez do Jogador X</div>
<div class="game-container" id="game-container">
    <div class="cell" data-index="0"></div>
    <div class="cell" data-index="1"></div>
    <div class="cell" data-index="2"></div>
    <div class="cell" data-index="3"></div>
    <div class="cell" data-index="4"></div>
    <div class="cell" data-index="5"></div>
    <div class="cell" data-index="6"></div>
    <div class="cell" data-index="7"></div>
    <div class="cell" data-index="8"></div>
</div>
<button class="reset-button" onclick="startGame()">Reiniciar Jogo</button>

<script>
    const cells = document.querySelectorAll('.cell');
    const statusText = document.getElementById('status');
    let board;
    let currentPlayer;
    let isGameActive;

    const HUMAN_PLAYER = 'X';
    const AI_PLAYER = 'O';

    const winningConditions = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8],
        [0, 3, 6], [1, 4, 7], [2, 5, 8],
        [0, 4, 8], [2, 4, 6]
    ];

    function startGame() {
        board = ['', '', '', '', '', '', '', '', ''];
        currentPlayer = HUMAN_PLAYER;
        isGameActive = true;
        statusText.textContent = `Vez do Jogador ${currentPlayer}`;
        cells.forEach(cell => {
            cell.textContent = '';
            // Remove a classe "vencedor" se voc√™ adicionar no futuro
            cell.removeEventListener('click', handleCellClick);
            cell.addEventListener('click', handleCellClick, { once: true });
        });
    }

    // --- L√ìGICA DO JOGADOR HUMANO ---
    function handleCellClick(clickedCellEvent) {
        const clickedCell = clickedCellEvent.target;
        const clickedCellIndex = parseInt(clickedCell.getAttribute('data-index'));

        if (board[clickedCellIndex] !== '' || !isGameActive || currentPlayer !== HUMAN_PLAYER) {
            return;
        }

        handleMove(clickedCell, clickedCellIndex, HUMAN_PLAYER);
        if (checkForWinner()) return;
        
        // Passa a vez para a IA
        currentPlayer = AI_PLAYER;
        statusText.textContent = `Vez do Computador (${AI_PLAYER})...`;
        
        // Pequeno atraso para simular o "pensamento" da IA
        setTimeout(makeAIMove, 500);
    }

    function handleMove(cell, index, player) {
        board[index] = player;
        cell.textContent = player;
        // Permite que o 'O' (IA) tenha um estilo de cor diferente se voc√™ quiser
        // cell.style.color = (player === AI_PLAYER) ? 'red' : 'blue'; 
    }

    function checkForWinner() {
        let roundWon = false;
        for (let i = 0; i < winningConditions.length; i++) {
            const [a, b, c] = winningConditions[i];

            if (board[a] === '' || board[b] === '' || board[c] === '') {
                continue;
            }
            if (board[a] === board[b] && board[b] === board[c]) {
                roundWon = true;
                break;
            }
        }

        if (roundWon) {
            statusText.textContent = `Jogador ${currentPlayer} VENCEU! üéâ`;
            isGameActive = false;
            cells.forEach(cell => cell.removeEventListener('click', handleCellClick));
            return true;
        }

        let roundDraw = !board.includes('');
        if (roundDraw) {
            statusText.textContent = `Empate! ü§ù`;
            isGameActive = false;
            return true;
        }

        return false;
    }

    // --- L√ìGICA DA IA (COMPUTADOR) ---
    function makeAIMove() {
        if (!isGameActive) return;

        let bestMove = getBestMove();
        
        if (bestMove !== -1) {
            const cell = cells[bestMove];
            
            // Remove o listener para que o clique manual n√£o funcione na c√©lula
            cell.removeEventListener('click', handleCellClick);

            handleMove(cell, bestMove, AI_PLAYER);

            if (checkForWinner()) return;

            // Volta a vez para o jogador humano
            currentPlayer = HUMAN_PLAYER;
            statusText.textContent = `Vez do Jogador ${currentPlayer}`;
        }
    }

    function getEmptyCells() {
        return board
            .map((val, index) => (val === '') ? index : null)
            .filter(val => val !== null);
    }

    // Fun√ß√£o principal de IA (L√≥gica Simples de Bloqueio/Vit√≥ria)
    function getBestMove() {
        const emptyCells = getEmptyCells();
        
        // 1. Tentar Vencer (Se 'O' tem uma jogada vencedora)
        let winningMove = findStrategicMove(AI_PLAYER);
        if (winningMove !== -1) return winningMove;
        
        // 2. Bloquear o Jogador Humano (Se 'X' tem uma jogada vencedora)
        let blockingMove = findStrategicMove(HUMAN_PLAYER);
        if (blockingMove !== -1) return blockingMove;
        
        // 3. Tentar o Centro (Posi√ß√£o 4)
        if (board[4] === '') return 4;

        // 4. Jogada Aleat√≥ria em qualquer c√©lula vazia
        if (emptyCells.length > 0) {
            const randomIndex = Math.floor(Math.random() * emptyCells.length);
            return emptyCells[randomIndex];
        }

        return -1; // N√£o h√° movimentos dispon√≠veis
    }
    
    // Fun√ß√£o auxiliar para encontrar jogada de vit√≥ria ou bloqueio
    function findStrategicMove(player) {
        for (let i = 0; i < winningConditions.length; i++) {
            const [a, b, c] = winningConditions[i];
            const line = [board[a], board[b], board[c]];
            
            // Verifica se a linha tem 2 pe√ßas do 'player' e 1 vazia
            if (line.filter(p => p === player).length === 2 && line.includes('')) {
                // Encontra o √≠ndice da c√©lula vazia na condi√ß√£o de vit√≥ria
                if (board[a] === '') return a;
                if (board[b] === '') return b;
                if (board[c] === '') return c;
            }
        }
        return -1; // Nenhuma jogada estrat√©gica encontrada
    }

    // Inicia o jogo
    startGame();
</script>
