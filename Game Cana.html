<style>
    /* Estilos do cenário */
    body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0;
        background-color: #87ceeb; /* Céu azul */
        overflow: hidden; /* Importante para focar apenas no jogo */
    }

    #game-container {
        width: 600px;
        height: 200px;
        border-bottom: 20px solid #38761d; /* Chão verde */
        position: relative;
        background-color: #a0d6b4; /* Fundo mais claro */
        overflow: hidden;
    }

    /* Estilos do Jogador */
    #player {
        width: 30px;
        height: 30px;
        background-color: #ff0000; /* Vermelho */
        position: absolute;
        bottom: 0px;
        left: 50px;
        border-radius: 5px;
    }

    /* Estilos do Obstáculo */
    .obstacle {
        width: 20px;
        height: 40px;
        background-color: #8b4513; /* Marrom (Tronco) */
        position: absolute;
        bottom: 0px;
        right: 0px;
        border-radius: 3px;
        animation: moveObstacle 2s infinite linear; /* Animação CSS para movimento */
    }

    /* O elemento que mostra o status do jogo */
    #status-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        color: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-size: 24px;
        text-align: center;
        z-index: 10;
        display: none; /* Escondido por padrão */
    }

    #status-overlay button {
        margin-top: 15px;
        padding: 10px 20px;
        font-size: 18px;
        cursor: pointer;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 5px;
    }

    /* Animação CSS para mover o obstáculo */
    @keyframes moveObstacle {
        0% { right: -20px; }
        100% { right: 620px; } /* Percorre a largura do contêiner + seu próprio tamanho */
    }
</style>

<div id="game-container">
    <div id="player"></div>
    <div class="obstacle"></div>
    
    <div id="status-overlay">
        <span>Pressione ESPAÇO para Pular</span>
        <button onclick="startGame()">Começar Jogo</button>
    </div>
</div>
<script>
    const player = document.getElementById('player');
    const obstacle = document.querySelector('.obstacle');
    const statusOverlay = document.getElementById('status-overlay');
    const gameContainer = document.getElementById('game-container');
    
    let isJumping = false;
    let gravity = 1; // Velocidade da gravidade
    let jumpSpeed = 15; // Força do pulo
    let playerY = 0; // Posição vertical do jogador
    let gameLoop;
    let isGameRunning = false;

    // --- Lógica de Controle do Jogador ---
    function jump() {
        if (!isJumping && isGameRunning) {
            isJumping = true;
            let currentJumpSpeed = jumpSpeed;
            
            // Loop para subida e descida
            const jumpInterval = setInterval(() => {
                // 1. Aplica a velocidade (subida)
                playerY += currentJumpSpeed;
                
                // 2. Aplica a gravidade (diminui a velocidade)
                currentJumpSpeed -= gravity;
                
                // 3. Verifica se atingiu o chão
                if (playerY <= 0) {
                    playerY = 0;
                    isJumping = false;
                    clearInterval(jumpInterval);
                    currentJumpSpeed = jumpSpeed; // Reseta para o próximo pulo
                }
                
                // Atualiza a posição no DOM
                player.style.bottom = playerY + 'px';
            }, 20); // Executa a cada 20ms
        }
    }

    // --- Lógica de Colisão ---
    function checkCollision() {
        if (!isGameRunning) return;
        
        const playerRect = player.getBoundingClientRect();
        const obstacleRect = obstacle.getBoundingClientRect();
        const containerRect = gameContainer.getBoundingClientRect();

        // Obtém as posições relativas ao container (mais fácil para PBI)
        const playerBottom = playerY;
        const playerLeft = 50;
        const playerRight = playerLeft + 30; // Largura do player

        // O obstáculo se move apenas horizontalmente (usando 'right')
        // Cálculo da posição horizontal (left) do obstáculo dentro do container
        const obstacleRightOffset = parseInt(window.getComputedStyle(obstacle).right);
        const obstacleLeft = gameContainer.clientWidth - obstacleRightOffset - 20; // 20 é a largura do obstáculo
        const obstacleRight = gameContainer.clientWidth - obstacleRightOffset;
        const obstacleHeight = 40; 
        
        // Verifica a sobreposição de caixas (x e y)
        const overlapX = playerRight > obstacleLeft && playerLeft < obstacleRight;
        const overlapY = playerBottom < obstacleHeight;
        
        if (overlapX && overlapY) {
            // COLISÃO! Fim de jogo
            stopGame();
        }
    }

    // --- Controle do Jogo ---
    function startGame() {
        if (isGameRunning) return;
        
        isGameRunning = true;
        statusOverlay.style.display = 'none';
        
        // Coloca o player no chão
        playerY = 0;
        player.style.bottom = playerY + 'px';
        
        // Reinicia a animação do obstáculo
        obstacle.style.animation = 'none';
        obstacle.offsetHeight; // Força o reflow para reiniciar
        obstacle.style.animation = 'moveObstacle 2s infinite linear';
        
        // Inicia o loop de detecção de colisão
        gameLoop = setInterval(checkCollision, 50); 
    }

    function stopGame() {
        if (!isGameRunning) return;

        isGameRunning = false;
        clearInterval(gameLoop);
        
        // Pausa a animação do obstáculo
        obstacle.style.animationPlayState = 'paused';
        
        // Mostra a tela de fim de jogo
        statusOverlay.querySelector('span').textContent = 'FIM DE JOGO!';
        statusOverlay.querySelector('button').textContent = 'Jogar Novamente';
        statusOverlay.style.display = 'flex';
    }

    // --- Listener de Teclado ---
    document.addEventListener('keydown', (e) => {
        // A tecla ESPAÇO tem o código 'Space' ou keyCode 32
        if (e.code === 'Space' || e.keyCode === 32) {
            if (!isGameRunning) {
                startGame();
            } else {
                jump();
                e.preventDefault(); // Impede que a barra de espaço role a página no PBI
            }
        }
    });
    
    // Inicia com a tela de 'Começar Jogo'
    statusOverlay.style.display = 'flex';
</script>
